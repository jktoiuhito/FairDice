(()=>{"use strict";class t{constructor(t,e){if(void 0!==e&&"string"!=typeof e)throw new Error("Name must be of type string or undefined");if("string"==typeof e){if(""===e)throw new Error("Name cannot be empty");if(""===e.trim())throw new Error("Name cannot consist only of whitespace")}this._value=t,this._name=null==e?void 0:e.trim()}get value(){return this._value}}class e extends t{constructor(t,e){if(super(t,e),"function"!=typeof t)throw new Error("Value must be of type function");Object.freeze(this)}}class n extends t{constructor(t,e){if(super(t,e),this.isEqual=t=>{if("boolean"!=typeof t)throw new Error("Argument must be of type boolean");if(this._value!==t)throw new Error(void 0!==this._name?`'${this._name}' is not '${t.toString()}'`:`boolean is not '${t.toString()}'`);return this},"boolean"!=typeof t)throw new Error("Value must be of type boolean");Object.freeze(this)}get isTrue(){if(!this._value)throw new Error(void 0!==this._name?`'${this._name}' is not true`:"boolean is not true");return this}get isFalse(){if(this._value)throw new Error(void 0!==this._name?`'${this._name}' is not false`:"boolean is not false");return this}}class i extends t{constructor(t,e){if(super(t,e),this.isGreaterThan=t=>{if("number"!=typeof t)throw new Error("Argument must be of type number");if(!(t<this._value))throw new Error(void 0!==this._name?`'${this._name}' is not greater than '${t.toString()}'`:`number is not greater than '${t.toString()}'`);return this},this.isLessThan=t=>{if("number"!=typeof t)throw new Error("Argument must be of type number");if(!(this._value<t))throw new Error(void 0!==this._name?`'${this._name}' is not less than '${t.toString()}'`:`number is not less than '${t.toString()}'`);return this},"number"!=typeof t)throw new Error("Value must be of type number");Object.freeze(this)}get isSafeInteger(){if(!Number.isSafeInteger(this._value))throw new Error(void 0!==this._name?`'${this._name}' is not a safe integer`:"number is not a safe integer");return this}get isNaN(){if(!Number.isNaN(this._value))throw new Error(void 0!==this._name?`'${this._name}' is not NaN`:"number is not NaN");return this}get isNotNaN(){if(Number.isNaN(this._value))throw new Error(void 0!==this._name?`'${this._name}' is NaN`:"number is NaN");return this}}class r extends t{constructor(t,e){if(super(t,e),this.isMatch=t=>{if(!("object"==typeof t&&t instanceof RegExp))throw new Error("Argument must be of type RegExp");if(!t.test(this._value))throw new Error(void 0!==this._name?`'${this._name}' does not match the regular expression ${t.toString()}`:"string does not match the regular expression "+t.toString());return this},this.isNotMatch=t=>{if(!("object"==typeof t&&t instanceof RegExp))throw new Error("Argument must be of type RegExp");if(t.test(this._value))throw new Error(void 0!==this._name?`'${this._name}' matches the regular expression ${t.toString()}`:"string matches the regular expression "+t.toString());return this},"string"!=typeof t)throw new Error("Value must be of type string");Object.freeze(this)}get isNotEmpty(){if(""===this._value)throw new Error(void 0!==this._name?`String '${this._name}' is empty`:"String is empty");return this}get isEmpty(){if(""!==this._value)throw new Error(void 0!==this._name?`String '${this._name}' is not empty`:"String is not empty");return this}get isNotWhitespace(){if(this._value.length>0&&""===this._value.trim())throw new Error(void 0!==this._name?`String '${this._name}' consists only of whitespace`:"String consists only of whitespace");return this}}class s extends t{constructor(t,e){if(super(t,e),"symbol"!=typeof t)throw new Error("Value must be of type symbol");Object.freeze(this)}}class o extends t{constructor(t,e){if(super(t,e),this.isInstanceOf=t=>{if("function"!=typeof t)throw new Error("Type must be of type function");if(void 0===t.prototype)throw new Error("Type must have a defined prototype");if(!(this._value instanceof t))throw new Error(`Object is not an instance of '${t.name}'`);return this},this.is=t=>{if("object"!=typeof t)throw new Error("Argument must be of type object");if(null===t)throw new Error("Argument cannot be null");if(this._value!==t)throw new Error(void 0!==this._name?`'${this._name}' is not referentially equal to the given object`:"object is not referentially equal to the given object");return this},this.isNot=t=>{if("object"!=typeof t)throw new Error("Argument must be of type object");if(null===t)throw new Error("Argument cannot be null");if(this._value===t)throw new Error(void 0!==this._name?`'${this._name}' is referentially equal to the given object`:"object is referentially equal to the given object");return this},this.isMatch=t=>{if("function"!=typeof t)throw new Error("Predicate must be of type function");if(1!==t.length)throw new Error("Predicate must expect exactly one parameter");const e=t(this._value);if("boolean"!=typeof e)throw new Error("Predicate must return a value of type boolean");if(!e)throw new Error(void 0!==this._name?`'${this._name}' does not match the predicate`:"object does not match the predicate");return this},"object"!=typeof t)throw new Error("Value must be of type object");if(null===t)throw new Error("Value cannot be null");Object.freeze(this)}}class h extends t{constructor(t,e){if(super(t,e),"object"!=typeof t)throw new Error("Value must be of type object");Object.freeze(this)}get isNull(){if(null!==this._value)throw new Error(void 0!==this._name?`'${this._name}' is not null`:"Value is not null");return this}get isNotNull(){if(null===this._value)throw new Error(void 0!==this._name?`'${this._name}' is null`:"Value is null");return new o(this._value,this._name)}}class a extends t{constructor(t,e){if(super(t,e),this.isGreaterThan=t=>{if("bigint"!=typeof t)throw new Error("Argument must be of type bigint");if(!(t<this._value))throw new Error(void 0!==this._name?`'${this._name}' is not greater than '${t.toString()}'`:`bigint is not greater than '${t.toString()}'`);return this},this.isLessThan=t=>{if("bigint"!=typeof t)throw new Error("Argument must be of type bigint");if(!(this._value<t))throw new Error(void 0!==this._name?`'${this._name}' is not less than '${t.toString()}'`:`bigint is not less than '${t.toString()}'`);return this},"bigint"!=typeof t)throw new Error("Value must be of type bigint");Object.freeze(this)}}class l extends t{constructor(t,e){super(t,e),Object.freeze(this)}get isBigint(){if("bigint"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a bigint`:"Value is not a bigint");return new a(this._value,this._name)}get isBoolean(){if("boolean"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a boolean`:"Value is not a boolean");return new n(this._value,this._name)}get isFunction(){if("function"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a function`:"Value is not a function");return new e(this._value,this._name)}get isNumber(){if("number"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a number`:"Value is not a number");return new i(this._value,this._name)}get isObject(){if("object"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not an object`:"Value is not an object");return new h(this._value,this._name)}get isString(){if("string"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a string`:"Value is not a string");return new r(this._value,this._name)}get isSymbol(){if("symbol"!=typeof this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not a symbol`:"Value is not a symbol");return new s(this._value,this._name)}get isUndefined(){if(void 0!==this._value)throw new Error(void 0!==this._name?`Value of '${this._name}' is not undefined`:"Value is not undefined");return this}}const u=(t,e)=>new l(t,e);class c{constructor(t,e,n){this.Rolls=u(t).isObject.isNotNull.isInstanceOf(Array).value,this.Previous=e,this.Next=n}}class m{constructor(t,e){if(u(t).isNumber.isNotNaN.isSafeInteger.value<1)throw new Error("'facecount' cannot be under one");if(u(e).isNumber.isNotNaN.isSafeInteger.value<1)throw new Error("'facecount' cannot be under one");if(e>t)throw new Error("'value' cannot be greater than 'dice'");this.Facecount=t,this.Value=e,Object.freeze(this)}}class f{constructor(){this.onCurrentRollsChange=t=>{this.Listeners.push(u(t).isFunction.value)},this.Roll=t=>{this.CurrentRolls.Rolls.push(new m(t,1)),this.Changed(this.CurrentRolls)},this.Reset=()=>{if(this.CurrentRolls.Rolls.length>0){const t=this.CurrentRolls,e=new c([]);t.Next=e,e.Previous=t,Object.freeze(t),this.History.push(e),this.CurrentRolls=e}this.Changed(this.CurrentRolls)},this.Changed=t=>{this.Listeners.forEach((e=>e(t)))},this.Listeners=[],this.CurrentRolls=new c([]),this.History=[],this.History.push(this.CurrentRolls)}}class d extends HTMLButtonElement{constructor(t){super(),this.Facecount=t,this._rollcount=0,this.type="button",this.className="btn btn-primary m-2",this.style.width="4em";const e=document.createElement("p");e.className="m-0 p-0",e.append(document.createTextNode("D"+this.Facecount.toString())),this._rollcountElement=document.createElement("p"),this._rollcountElement.className="m-0 p-0 badge",this._rollcountElement.append(document.createTextNode(this._rollcount.toString())),this.append(e,this._rollcountElement)}set Rollcount(t){if(t<0)throw new Error("'rollcount' cannot be under one");this._rollcount=t,this._rollcountElement.removeChild(this._rollcountElement.firstChild),this._rollcountElement.appendChild(document.createTextNode(this._rollcount.toString()))}}d.ElementName="dice-button",customElements.define(d.ElementName,d,{extends:"button"});class w{constructor(t){this.DisplayCurrentRolls=t=>{for(this.CurrentRolls=t;null!==this.ResultsContainer.firstChild;)this.ResultsContainer.removeChild(this.ResultsContainer.firstChild);let e=0;t.Rolls.forEach((t=>{e+=t.Value;const n=document.createElement("div");n.className="card m-1",n.style.width="4em",n.style.height="4em";const i=document.createElement("h5");i.className="badge text-muted",i.appendChild(document.createTextNode("d"+t.Facecount.toString())),n.appendChild(i);const r=document.createElement("span");r.appendChild(document.createTextNode(t.Value.toString())),n.appendChild(r),this.ResultsContainer.appendChild(n)})),this.ScoreCounter.removeChild(this.ScoreCounter.firstChild),this.ScoreCounter.appendChild(document.createTextNode(e.toString())),this.Dice.forEach((t=>t.Rollcount=this.CurrentRolls.Rolls.filter((e=>e.Facecount===t.Facecount)).length)),this.NewRollButton.disabled=t.Rolls.length<=0,this.PreviousButton.disabled=void 0===t.Previous,this.NextButton.disabled=void 0===t.Next},this.GetElementById=t=>u(document.getElementById(t),t).isObject.isNotNull.isInstanceOf(HTMLElement).value,this.DiceContainer=this.GetElementById("dice-container"),this.ResultsContainer=this.GetElementById("results-container"),this.ScoreCounter=this.GetElementById("score-counter");const e=this.GetElementById("controls-container"),n=this.GetElementById("button-benchmark");this.PreviousButton=this.GetElementById("button-previous"),this.NextButton=this.GetElementById("button-next"),this.NewRollButton=this.GetElementById("button-new");const i=this.GetElementById("run-benchmark-button");this.DiceContainer.hidden=!1,this.ResultsContainer.hidden=!1,e.hidden=!1,n.hidden=!1,this.ScoreCounter.hidden=!1,t.onCurrentRollsChange(this.DisplayCurrentRolls),this.Dice=[],w.Dice.forEach((e=>{const n=new d(e);n.addEventListener("click",(()=>{t.Roll(e)})),this.DiceContainer.appendChild(n),this.Dice.push(n)})),this.PreviousButton.addEventListener("click",(()=>{this.DisplayCurrentRolls(this.CurrentRolls.Previous)})),this.NextButton.addEventListener("click",(()=>{this.DisplayCurrentRolls(this.CurrentRolls.Next)})),this.NewRollButton.addEventListener("click",(()=>{t.Reset()})),i.addEventListener("click",(()=>{throw new Error("not implemented")})),this.CurrentRolls=new c([]),this.DisplayCurrentRolls(this.CurrentRolls)}}w.Dice=[4,6,8,10,12,20,100],window.addEventListener("load",(()=>{new w(new f)}))})();